# 通用任务链控制器插件 - 使用指南

## 📋 概述

通用任务链控制器插件是一个创新的AI注意力管理工具，通过结构化的任务编排和执行机制，帮助AI模型在处理复杂任务时保持注意力聚焦和逻辑清晰。

### 🎯 核心价值

- **注意力控制**：通过任务链确保AI按照预定步骤执行，避免思维跳跃
- **结构化思维**：将复杂问题分解为可管理的任务步骤
- **灵活配置**：支持预设模板和完全自定义的任务链
- **质量保证**：每个步骤都有明确的能力要求和验证机制

## 🚀 快速开始

### 基础使用示例

```json
{
  "task_type": "analysis",
  "target": "电动汽车市场趋势",
  "config": {
    "depth": "detailed",
    "focus_areas": ["技术趋势", "市场规模"]
  }
}
```

## 📊 任务类型详解

### 1. 分析类任务 (analysis)

**适用场景**：市场分析、竞品研究、数据分析、趋势预测

**执行步骤**：
1. **理解目标** - 深入理解分析目标和需求
2. **信息收集** - 收集相关信息和数据
3. **深度分析** - 进行深入的分析和推理
4. **结果综合** - 整合分析结果并形成结论

**示例**：
```json
{
  "task_type": "analysis",
  "target": "人工智能在医疗领域的应用前景",
  "config": {
    "depth": "comprehensive",
    "focus_areas": ["技术成熟度", "市场需求", "监管环境", "投资趋势"]
  }
}
```

### 2. 创意类任务 (creative)

**适用场景**：产品设计、内容创作、方案策划、创新思维

**执行步骤**：
1. **灵感收集** - 收集创意灵感和参考资料
2. **创意生成** - 生成多个创意方案
3. **方案评估** - 评估和筛选创意方案
4. **方案优化** - 优化选定方案并完善细节

**示例**：
```json
{
  "task_type": "creative",
  "target": "智能家居产品设计",
  "config": {
    "depth": "detailed",
    "focus_areas": ["用户体验", "技术可行性", "成本控制"]
  }
}
```

### 3. 教育类任务 (education)

**适用场景**：学习辅导、知识传授、技能培训、课程设计

**执行步骤**：
1. **学习评估** - 评估学习者当前水平和需求
2. **内容规划** - 规划学习内容和路径
3. **知识传授** - 传授核心知识和技能
4. **效果验证** - 验证学习效果和调整方案

**示例**：
```json
{
  "task_type": "education",
  "target": "Python编程入门教学",
  "config": {
    "depth": "basic",
    "language": "zh"
  },
  "learning_chain": [
    {"step": "基础评估", "action": "了解学习者编程基础"},
    {"step": "环境搭建", "action": "指导安装Python开发环境"},
    {"step": "语法学习", "action": "讲解Python基础语法"},
    {"step": "实践练习", "action": "提供编程练习题"}
  ]
}
```

### 4. 研究类任务 (research)

**适用场景**：学术研究、调研分析、问题探索、文献综述

**执行步骤**：
1. **问题定义** - 明确研究问题和目标
2. **文献调研** - 收集和分析相关文献
3. **深入研究** - 进行深入的研究和分析
4. **结论形成** - 形成研究结论和建议

**示例**：
```json
{
  "task_type": "research",
  "target": "区块链技术在供应链管理中的应用",
  "config": {
    "depth": "comprehensive",
    "focus_areas": ["技术原理", "应用案例", "挑战分析", "发展趋势"]
  }
}
```

### 5. 自定义任务 (custom)

**适用场景**：特殊需求、复杂流程、个性化任务链

**示例**：
```json
{
  "task_type": "custom",
  "target": "企业数字化转型方案",
  "custom_chain": [
    {
      "name": "现状调研",
      "description": "调研企业当前数字化水平",
      "required_capabilities": ["理解分析", "信息检索"]
    },
    {
      "name": "需求分析",
      "description": "分析数字化转型需求",
      "required_capabilities": ["需求提取", "逻辑推理"]
    },
    {
      "name": "方案设计",
      "description": "设计数字化转型方案",
      "required_capabilities": ["方案设计", "创意生成"]
    },
    {
      "name": "风险评估",
      "description": "评估转型风险和挑战",
      "required_capabilities": ["风险评估", "质量验证"]
    },
    {
      "name": "实施规划",
      "description": "制定详细实施计划",
      "required_capabilities": ["方案设计", "结果整合"]
    }
  ]
}
```

## 🔧 配置参数详解

### config 配置对象

```json
{
  "depth": "detailed",           // 分析深度：basic/detailed/comprehensive
  "focus_areas": ["area1", "area2"], // 重点关注领域
  "language": "zh",              // 输出语言：zh/en
  "execution_mode": "sequential"  // 执行模式：sequential/parallel/conditional
}
```

### 深度级别说明

- **basic**：基础分析，快速概览
- **detailed**：详细分析，深入探讨
- **comprehensive**：全面分析，多维度深度研究

## 🎛️ 能力模块系统

插件内置10种标准能力模块：

| 能力模块 | 功能描述 | 输出内容 |
|---------|---------|----------|
| 理解分析 | 深入理解和分析目标对象 | 核心概念、关键要素、上下文理解 |
| 需求提取 | 从复杂信息中提取核心需求 | 功能需求、性能需求、约束条件 |
| 信息检索 | 收集和整理相关信息 | 信息来源、关键数据、相关性评估 |
| 数据整理 | 结构化组织数据 | 数据结构、分类体系、整理摘要 |
| 创意生成 | 产生创新想法和方案 | 创意想法、核心概念、创新点 |
| 逻辑推理 | 进行逻辑分析和推理 | 推理过程、逻辑结论、支撑证据 |
| 方案设计 | 设计解决方案 | 解决方案、组件分析、实施建议 |
| 风险评估 | 识别和评估风险 | 风险识别、影响评估、缓解策略 |
| 质量验证 | 验证结果质量 | 质量评分、验证点、改进建议 |
| 结果整合 | 整合多个结果形成综合结论 | 综合结果、结果分析、最终洞察 |

## 📈 输出结果解读

### 标准输出结构

```json
{
  "success": true,
  "session_id": "uuid-string",
  "task_type": "analysis",
  "target": "目标对象",
  "execution_results": [...],     // 每个步骤的详细结果
  "final_report": {...},          // 最终综合报告
  "execution_summary": {...}      // 执行统计摘要
}
```

### final_report 结构

```json
{
  "executive_summary": "执行摘要",
  "target_analysis": "目标分析",
  "key_findings": ["发现1", "发现2"],
  "detailed_results": {
    "completed_tasks": [...],
    "failed_tasks": [...]
  },
  "recommendations": ["建议1", "建议2"],
  "quality_metrics": {
    "completion_rate": "95.0%",
    "average_execution_time": "2.5s",
    "total_capabilities_used": 8
  }
}
```

## 🛠️ 高级用法

### 1. 任务依赖关系

在自定义任务链中，可以设置任务间的依赖关系：

```json
{
  "custom_chain": [
    {
      "id": "step1",
      "name": "基础分析",
      "description": "进行基础分析"
    },
    {
      "id": "step2",
      "name": "深度分析",
      "description": "基于基础分析进行深度分析",
      "dependencies": ["step1"]
    }
  ]
}
```

### 2. 错误处理策略

```json
{
  "continue_on_failure": false  // 遇到错误时停止执行
}
```

### 3. 多语言支持

```json
{
  "config": {
    "language": "en"  // 英文输出
  }
}
```

## 🔍 调试和监控

### 会话追踪

每次执行都会生成唯一的 `session_id`，用于：
- 追踪任务执行过程
- 调试问题
- 性能分析

### 执行日志

每个任务步骤都包含详细的执行信息：
- 执行状态
- 执行时间
- 输出结果
- 错误信息（如有）

### 性能指标

- 完成率
- 平均执行时间
- 使用的能力模块数量

## ⚠️ 常见问题

### Q1: 如何选择合适的任务类型？

**A**: 根据你的具体需求选择：
- 需要分析和研究 → `analysis` 或 `research`
- 需要创意和设计 → `creative`
- 需要教学和培训 → `education`
- 有特殊流程需求 → `custom`

### Q2: 自定义任务链的最佳实践？

**A**: 
1. 每个步骤目标明确
2. 合理选择能力模块
3. 设置适当的依赖关系
4. 控制任务链长度（建议不超过10个步骤）

### Q3: 如何优化执行性能？

**A**:
1. 选择合适的深度级别
2. 精确定义关注领域
3. 合理使用 `continue_on_failure`
4. JavaScript版本支持异步执行，性能更好

### Q4: 错误处理建议？

**A**:
1. 检查输入参数格式
2. 验证任务类型有效性
3. 确保自定义任务链结构正确
4. 查看详细错误信息和会话ID

## 🎯 最佳实践

### 1. 任务设计原则

- **单一职责**：每个任务步骤只负责一个明确的目标
- **逻辑清晰**：任务间的逻辑关系要清楚
- **可验证性**：每个步骤的输出要可验证

### 2. 能力模块选择

- 根据任务性质选择合适的能力模块
- 避免在单个步骤中使用过多能力模块
- 考虑能力模块间的协同效应

### 3. 配置优化

- 根据实际需求选择深度级别
- 明确定义关注领域，避免过于宽泛
- 合理设置语言和执行模式

## 📚 扩展阅读

- [任务链设计模式](./docs/task-chain-patterns.md)
- [能力模块开发指南](./docs/capability-development.md)
- [性能优化建议](./docs/performance-optimization.md)
- [API参考文档](./docs/api-reference.md)

---

**版本**: 1.0.0  
**更新时间**: 2025-08-03  
**作者**: 字伯升 (vx: zibosheng88)

如有问题或建议，请联系开发团队。